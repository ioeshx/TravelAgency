# ğŸ›« æœºç¥¨æœåŠ¡ç³»ç»Ÿ (Flight Ticket System)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åŸºäºDjango REST Frameworkçš„æœºç¥¨æœåŠ¡ç³»ç»Ÿï¼Œæ”¯æŒèˆªç­ç®¡ç†ã€æŸ¥è¯¢ã€è®¢åº§ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›ç°ä»£åŒ–çš„Webç•Œé¢å’Œå®Œæ•´çš„RESTful APIã€‚

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- âœ… **æ•°æ®åº“è¿ç§»å®Œæˆ** - æ‰€æœ‰è¡¨ç»“æ„å·²åˆ›å»º
- âœ… **ç¤ºä¾‹æ•°æ®å·²åˆ›å»º** - åŒ…å«å¤šä¸ªç¤ºä¾‹èˆªç­
- âœ… **æœåŠ¡å™¨è¿è¡Œæ­£å¸¸** - Djangoå¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨
- âœ… **å‰ç«¯ç•Œé¢å®Œæ•´** - ç°ä»£åŒ–Webç•Œé¢
- âœ… **APIæ¥å£å®Œæ•´** - æ”¯æŒRESTful APIè°ƒç”¨
- âœ… **ç”¨æˆ·ç³»ç»Ÿå®Œå–„** - æ³¨å†Œã€ç™»å½•ã€æƒé™æ§åˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Django 4.1.7
- Django REST Framework
- SQLite3

### ä¸€é”®å¯åŠ¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd backend

# 2. å®‰è£…ä¾èµ–
pip install Django==4.1.7 djangorestframework

# 3. æ•°æ®åº“è¿ç§»
python manage.py makemigrations
python manage.py migrate

# 4. åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
python manage.py createsuperuser

# 5. å¯åŠ¨æœåŠ¡å™¨
python manage.py runserver

# 6. è®¿é—®ç³»ç»Ÿ
# ç½‘ç«™é¦–é¡µ: http://127.0.0.1:8000/
# ç®¡ç†åå°: http://127.0.0.1:8000/admin/
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœˆï¸ èˆªç­ç®¡ç†

- **èˆªç­æœç´¢** - æ”¯æŒå‡ºå‘åœ°ã€ç›®çš„åœ°ã€å‡ºå‘æ—¶é—´å¤šæ¡ä»¶æœç´¢
- **èˆªç­åˆ—è¡¨** - åˆ†é¡µæ˜¾ç¤ºï¼Œæ”¯æŒæ’åºå’Œç­›é€‰
- **èˆªç­è¯¦æƒ…** - è¯¦ç»†çš„èˆªç­ä¿¡æ¯å±•ç¤º
- **å®æ—¶æ›´æ–°** - æ”¯æŒèˆªç­ä¿¡æ¯çš„å®æ—¶æ›´æ–°

### ğŸ« è®¢åº§åŠŸèƒ½

- **åœ¨çº¿è®¢åº§** - ç®€å•æ˜“ç”¨çš„è®¢åº§æµç¨‹
- **å¤šèˆ±ä½æ”¯æŒ** - ç»æµèˆ±ã€å•†åŠ¡èˆ±ã€å¤´ç­‰èˆ±
- **åº§ä½ç®¡ç†** - å®æ—¶åº§ä½æ•°é‡ç»Ÿè®¡
- **è®¢åº§è®°å½•** - å®Œæ•´çš„è®¢åº§å†å²ç®¡ç†
- **å–æ¶ˆè®¢åº§** - çµæ´»çš„å–æ¶ˆæœºåˆ¶

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ

- **ç”¨æˆ·æ³¨å†Œ** - å®‰å…¨çš„ç”¨æˆ·æ³¨å†Œæµç¨‹
- **ç™»å½•/ç™»å‡º** - ä¼šè¯ç®¡ç†
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ä¸ªäººä¸­å¿ƒ** - è®¢åº§è®°å½•æŸ¥çœ‹å’Œç®¡ç†

### ğŸŒ Webç•Œé¢

- **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ç°ä»£åŒ–UI** - Bootstrap 5 + è‡ªå®šä¹‰æ ·å¼
- **ç”¨æˆ·å‹å¥½** - ç›´è§‚çš„å¯¼èˆªå’Œæ“ä½œæµç¨‹
- **å®æ—¶åé¦ˆ** - æ¶ˆæ¯æç¤ºå’ŒçŠ¶æ€æ›´æ–°

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

- **Python 3.8+** - æ ¸å¿ƒå¼€å‘è¯­è¨€
- **Django 4.1.7** - Webæ¡†æ¶
- **Django REST Framework** - APIå¼€å‘æ¡†æ¶
- **SQLite3** - æ•°æ®åº“

### å‰ç«¯æŠ€æœ¯

- **HTML5** - é¡µé¢ç»“æ„
- **CSS3** - æ ·å¼è®¾è®¡
- **Bootstrap 5** - å“åº”å¼æ¡†æ¶
- **JavaScript** - äº¤äº’åŠŸèƒ½
- **Font Awesome** - å›¾æ ‡åº“

### å¼€å‘å·¥å…·

- **Django Admin** - ç®¡ç†åå°
- **Django Debug Toolbar** - è°ƒè¯•å·¥å…·
- **Django REST Framework** - APIæ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„

```
flight-ticket/
â”œâ”€â”€ backend/                          # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ manage.py                     # Djangoç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ db.sqlite3                    # SQLiteæ•°æ®åº“
â”‚   â”œâ”€â”€ flight_service/               # Djangoé¡¹ç›®é…ç½®
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ settings.py               # é¡¹ç›®è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ urls.py                  # ä¸»URLé…ç½®
â”‚   â”‚   â”œâ”€â”€ wsgi.py                  # WSGIé…ç½®
â”‚   â”‚   â””â”€â”€ asgi.py                  # ASGIé…ç½®
â”‚   â”œâ”€â”€ flights/                      # èˆªç­åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ views.py                 # è§†å›¾å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ serializers.py           # åºåˆ—åŒ–å™¨
â”‚   â”‚   â”œâ”€â”€ urls.py                  # åº”ç”¨URLé…ç½®
â”‚   â”‚   â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ templates/                    # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ base.html                # åŸºç¡€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ index.html               # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ flight_search.html       # èˆªç­æœç´¢
â”‚   â”‚   â”œâ”€â”€ flight_list.html         # èˆªç­åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ flight_detail.html       # èˆªç­è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ booking_form.html        # è®¢åº§è¡¨å•
â”‚   â”‚   â”œâ”€â”€ booking_list.html        # è®¢åº§åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ booking_confirm_cancel.html # å–æ¶ˆè®¢åº§ç¡®è®¤
â”‚   â”‚   â”œâ”€â”€ login.html               # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ register.html            # æ³¨å†Œé¡µé¢
â”‚   â””â”€â”€ static/                      # é™æ€æ–‡ä»¶
â”‚       â””â”€â”€ css/
â”‚           â””â”€â”€ custom.css           # è‡ªå®šä¹‰æ ·å¼
â”œâ”€â”€ docker-compose.yml               # Dockerç¼–æ’æ–‡ä»¶
â”œâ”€â”€ dockerfile                       # Dockeré•œåƒæ–‡ä»¶
â”œâ”€â”€ requirementx.txt                 # é¡¹ç›®ä¾èµ–
â””â”€â”€ readme.md                        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹

### Flight (èˆªç­æ¨¡å‹)

```python
- flight_number: èˆªç­å· (CharField)
- departure_city: å‡ºå‘åœ° (CharField)
- arrival_city: ç›®çš„åœ° (CharField)
- departure_time: å‡ºå‘æ—¶é—´ (DateTimeField)
- arrival_time: åˆ°è¾¾æ—¶é—´ (DateTimeField)
- airline: èˆªç©ºå…¬å¸ (CharField)
- aircraft_type: é£æœºæœºå‹ (CharField)
- economy_seats: ç»æµèˆ±åº§ä½æ•° (IntegerField)
- business_seats: å•†åŠ¡èˆ±åº§ä½æ•° (IntegerField)
- first_seats: å¤´ç­‰èˆ±åº§ä½æ•° (IntegerField)
- economy_price: ç»æµèˆ±ä»·æ ¼ (DecimalField)
- business_price: å•†åŠ¡èˆ±ä»·æ ¼ (DecimalField)
- first_price: å¤´ç­‰èˆ±ä»·æ ¼ (DecimalField)
```

### Booking (è®¢åº§æ¨¡å‹)

```python
- user: ç”¨æˆ· (ForeignKey)
- flight: èˆªç­ (ForeignKey)
- seat_class: èˆ±ä½ç­‰çº§ (CharField)
- seat_count: è®¢åº§æ•°é‡ (IntegerField)
- passenger_name: ä¹˜å®¢å§“å (CharField)
- passenger_id: èº«ä»½è¯å· (CharField)
- phone: è”ç³»ç”µè¯ (CharField)
- status: è®¢åº§çŠ¶æ€ (CharField)
- booking_time: è®¢åº§æ—¶é—´ (DateTimeField)
```

## ğŸ”Œ APIæ¥å£

### èˆªç­ç›¸å…³API

#### 1. è·å–æ‰€æœ‰èˆªç­

```bash
GET /api/flights/
curl.exe "http://127.0.0.1:8000/api/flights/"
```

#### 2. èˆªç­æœç´¢

```bash
GET /api/flights/search/?departure_city=åŒ—äº¬&arrival_city=ä¸Šæµ·&departure_date=2025-10-01
curl.exe "http://127.0.0.1:8000/api/flights/search/?departure_city=åŒ—äº¬&arrival_city=ä¸Šæµ·"
```

#### 3. èˆªç­è¯¦æƒ…

```bash
GET /api/flights/{id}/
curl.exe "http://127.0.0.1:8000/api/flights/1/"
```

#### 4. åˆ›å»ºèˆªç­

```bash
POST /api/flights/
Content-Type: application/json

{
    "flight_number": "CA123",
    "departure_city": "Beijing",
    "arrival_city": "Shanghai",
    "departure_time": "2025-10-01T10:00:00Z",
    "arrival_time": "2025-10-01T12:00:00Z",
    "airline": "Air China",
    "aircraft_type": "Boeing 737",
    "economy_seats": 150,
    "economy_price": "800.00",
    "business_seats": 20,
    "business_price": "1600.00",
    "first_seats": 10,
    "first_price": "3200.00"
}
```

### è®¢åº§ç›¸å…³API

#### 1. åˆ›å»ºè®¢åº§

```bash
POST /api/bookings/create/
Content-Type: application/json

{
    "flight_id": 1,
    "seat_class": "economy",
    "seat_count": 2,
    "passenger_name": "å¼ ä¸‰",
    "passenger_id": "123456789012345678",
    "phone": "13800138000"
}
```

#### 2. è·å–è®¢åº§è®°å½•

```bash
GET /api/bookings/
curl.exe "http://127.0.0.1:8000/api/bookings/"
```

## ğŸ’» ä½¿ç”¨è¯´æ˜

### Webç•Œé¢ä½¿ç”¨

#### 1. é¦–é¡µåŠŸèƒ½

- **å¿«é€Ÿæœç´¢** - åœ¨é¦–é¡µç›´æ¥æœç´¢èˆªç­
- **åŠŸèƒ½å¯¼èˆª** - å¿«é€Ÿè®¿é—®å„ä¸ªåŠŸèƒ½æ¨¡å—
- **ç³»ç»Ÿä»‹ç»** - äº†è§£ç³»ç»ŸåŠŸèƒ½ç‰¹è‰²

#### 2. èˆªç­æŸ¥è¯¢

- **å¤šæ¡ä»¶æœç´¢** - æ”¯æŒå‡ºå‘åœ°ã€ç›®çš„åœ°ã€å‡ºå‘æ—¶é—´ç»„åˆæŸ¥è¯¢
- **ç»“æœå±•ç¤º** - æ¸…æ™°çš„èˆªç­ä¿¡æ¯å±•ç¤º
- **ä»·æ ¼å¯¹æ¯”** - ä¸åŒèˆ±ä½ä»·æ ¼å¯¹æ¯”

#### 3. è®¢åº§æµç¨‹

- **é€‰æ‹©èˆªç­** - ä»æœç´¢ç»“æœæˆ–åˆ—è¡¨ä¸­é€‰æ‹©èˆªç­
- **å¡«å†™ä¿¡æ¯** - å¡«å†™ä¹˜å®¢ä¿¡æ¯å’Œèˆ±ä½é€‰æ‹©
- **ç¡®è®¤è®¢åº§** - ç¡®è®¤è®¢åº§ä¿¡æ¯å¹¶å®Œæˆè®¢åº§
- **ç®¡ç†è®¢åº§** - æŸ¥çœ‹è®¢åº§è®°å½•ï¼Œå–æ¶ˆä¸éœ€è¦çš„è®¢åº§

### ç®¡ç†å‘˜åŠŸèƒ½

1. **è®¿é—®ç®¡ç†åå°**: http://127.0.0.1:8000/admin/
2. **æ·»åŠ èˆªç­ä¿¡æ¯**: åœ¨ç®¡ç†åå°æ·»åŠ æ–°çš„èˆªç­
3. **ç®¡ç†ç”¨æˆ·**: æŸ¥çœ‹å’Œç®¡ç†ç”¨æˆ·è´¦æˆ·
4. **è®¢åº§è®°å½•**: æŸ¥çœ‹æ‰€æœ‰è®¢åº§è®°å½•å’Œç»Ÿè®¡ä¿¡æ¯

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### ä½¿ç”¨PowerShellæµ‹è¯•API

#### 1. è·å–æ‰€æœ‰èˆªç­

```powershell
Invoke-RestMethod -Uri "http://127.0.0.1:8000/api/flights/" -Method GET
```

#### 2. æœç´¢èˆªç­

```powershell
Invoke-RestMethod -Uri "http://127.0.0.1:8000/api/flights/search/?departure_city=åŒ—äº¬" -Method GET
```

#### 3. åˆ›å»ºèˆªç­

```powershell
$flightData = @{
    flight_number = "CA123"
    departure_city = "Beijing"
    arrival_city = "Shanghai"
    departure_time = "2025-10-01T10:00:00Z"
    arrival_time = "2025-10-01T12:00:00Z"
    airline = "Air China"
    aircraft_type = "Boeing 737"
    economy_seats = 150
    economy_price = "800.00"
    business_seats = 20
    business_price = "1600.00"
    first_seats = 10
    first_price = "3200.00"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://127.0.0.1:8000/api/flights/" -Method POST -ContentType "application/json" -Body $flightData
```

#### 4. åˆ›å»ºè®¢åº§

```powershell
$bookingData = @{
    flight_id = 1
    seat_class = "economy"
    seat_count = 2
    passenger_name = "å¼ ä¸‰"
    passenger_id = "123456789012345678"
    phone = "13800138000"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://127.0.0.1:8000/api/bookings/create/" -Method POST -ContentType "application/json" -Body $bookingData
```

## ğŸ³ Dockeræ”¯æŒ

### ä½¿ç”¨Dockerè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t flight-ticket .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 flight-ticket

# ä½¿ç”¨docker-compose
docker-compose up -d
```

## ğŸ”§ å¼€å‘è¯´æ˜

### ä»£ç ç»“æ„

- **MVCæ¶æ„** - æ¸…æ™°çš„æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»
- **RESTful API** - ç¬¦åˆRESTè§„èŒƒçš„APIè®¾è®¡
- **å“åº”å¼è®¾è®¡** - æ”¯æŒå¤šç§è®¾å¤‡è®¿é—®
- **æ¨¡å—åŒ–å¼€å‘** - åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤

### å®‰å…¨ç‰¹æ€§

- **CSRFä¿æŠ¤** - é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ 
- **ç”¨æˆ·è®¤è¯** - å®‰å…¨çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **æ•°æ®éªŒè¯** - å®Œæ•´çš„è¾“å…¥æ•°æ®éªŒè¯

### æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“ç´¢å¼•** - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- **é™æ€æ–‡ä»¶** - é™æ€èµ„æºä¼˜åŒ–
- **ç¼“å­˜æœºåˆ¶** - å‡å°‘æ•°æ®åº“æŸ¥è¯¢
- **åˆ†é¡µæ˜¾ç¤º** - å¤§æ•°æ®é‡åˆ†é¡µå¤„ç†

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-09-29)

- âœ… å®ŒæˆåŸºç¡€åŠŸèƒ½å¼€å‘
- âœ… å®ç°èˆªç­ç®¡ç†åŠŸèƒ½
- âœ… å®ç°è®¢åº§åŠŸèƒ½
- âœ… å®ç°ç”¨æˆ·ç³»ç»Ÿ
- âœ… å®ŒæˆAPIæ¥å£å¼€å‘
- âœ… å®Œæˆå‰ç«¯ç•Œé¢å¼€å‘
- âœ… ä»£ç ä¼˜åŒ–å’Œæ¸…ç†

## ğŸš€ éƒ¨ç½²å»ºè®®

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **æ•°æ®åº“å‡çº§** - ä½¿ç”¨PostgreSQLæˆ–MySQL
2. **å®‰å…¨åŠ å›º** - é…ç½®HTTPSã€é˜²ç«å¢™
3. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨Redisç¼“å­˜ã€CDNåŠ é€Ÿ
4. **ç›‘æ§å‘Šè­¦** - æ·»åŠ æ—¥å¿—è®°å½•å’Œé”™è¯¯ç›‘æ§
5. **è´Ÿè½½å‡è¡¡** - ä½¿ç”¨Nginxåå‘ä»£ç†
6. **å®¹å™¨åŒ–** - ä½¿ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²

### æ‰©å±•åŠŸèƒ½

1. **æ”¯ä»˜é›†æˆ** - é›†æˆæ”¯ä»˜ç½‘å…³
2. **é‚®ä»¶é€šçŸ¥** - è®¢åº§ç¡®è®¤é‚®ä»¶
3. **çŸ­ä¿¡é€šçŸ¥** - é‡è¦ä¿¡æ¯çŸ­ä¿¡æé†’
4. **ç§»åŠ¨ç«¯** - å¼€å‘ç§»åŠ¨ç«¯åº”ç”¨
5. **æ•°æ®åˆ†æ** - ç”¨æˆ·è¡Œä¸ºåˆ†æ
6. **å¤šè¯­è¨€** - å›½é™…åŒ–æ”¯æŒ

![1759150869506](image/readme/1759150869506.pdf)**ğŸ‰ æ„Ÿè°¢ä½¿ç”¨æœºç¥¨æœåŠ¡ç³»ç»Ÿï¼**

*ä¸“ä¸šçš„æœºç¥¨é¢„è®¢æœåŠ¡å¹³å°ï¼Œä¸ºæ‚¨æä¾›ä¾¿æ·çš„èˆªç­æŸ¥è¯¢å’Œè®¢åº§æœåŠ¡ã€‚*
